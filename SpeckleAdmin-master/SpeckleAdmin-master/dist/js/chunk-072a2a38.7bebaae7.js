(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-072a2a38"],{"0a16":function(e,r,t){"use strict";var s=t("e139"),a=t.n(s);a.a},a55b:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs11:"",lg6:""}},[!1===e.$store.state.isAuth?t("form",{staticClass:"md-layout-item md-size-33 md-small-size-100 md-medium-size-50",on:{submit:function(r){return r.preventDefault(),e.login(r)}}},[t("v-card",{staticClass:"elevation-3"},[t("v-toolbar",{staticClass:"title text-uppercase elevation-0"},[t("span",[e._v("Login  ")]),t("v-spacer"),t("span",{staticClass:"font-weight-light caption"},[e._v("or "),t("router-link",{attrs:{to:"/register"}},[e._v("register")]),e._v("?")],1)],1),t("v-card-text",[t("v-text-field",{attrs:{"prepend-inner-icon":"developer_board",hint:"server url",type:"url",name:"server"},on:{blur:e.checkServer},model:{value:e.server,callback:function(r){e.server=r},expression:"server"}}),t("v-text-field",{attrs:{rules:e.emailRules,"prepend-inner-icon":"email",type:"email",name:"email",label:"your email"},model:{value:e.email,callback:function(r){e.email=r},expression:"email"}}),t("v-text-field",{attrs:{"prepend-inner-icon":"lock",type:"password",name:"password",label:"your password"},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),t("v-card-actions",[t("v-btn",{staticClass:"md-primary md-raised",attrs:{type:"submit"}},[e._v("Login")])],1),t("v-alert",{attrs:{type:"warning",dismissible:""},model:{value:e.showError,callback:function(r){e.showError=r},expression:"showError"}},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")])],1)],1):t("v-card",[t("v-card-text",[e._v("You are already logged in.")])],1)],1)],1)],1)},a=[],o=(t("6762"),t("2fdb"),t("bc3a")),i=t.n(o),n={name:"LoginView",components:{},computed:{},watch:{},data:function(){return{server:null,email:null,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],password:null,errorMessage:null,showError:!1,serverOk:!1}},methods:{login:function(){var e=this;this.$store.dispatch("login",{email:this.email,password:this.password}).then(function(r){if(console.log("Logged in."),e.$store.dispatch("getStreams","omit=objects,layers&isComputedResult=false&deleted=false&sort=-lastModified"),e.$store.dispatch("getProjects"),null!==e.$route.params.redirectTo&&void 0!==e.$route.params.redirectTo){var t=atob(e.$route.params.redirectTo);e.$router.push(t),e.password=null}else e.$router.push("/")}).catch(function(r){console.log(r),console.log("login error"),e.errorMessage="Failed to log in.",e.showError=!0})},checkServer:function(){var e=this;this.server.includes("api")||(this.server+="/api"),i.a.get(this.server).then(function(r){if(!r.data.hasOwnProperty("serverName"))throw new Error("Failed to get server.");e.serverOk=!0,e.errorMessage="",e.showError=!1,e.$store.commit("SET_SERVER",e.server),e.$store.commit("SET_SERVER_DETAILS",r.data),localStorage.setItem("server",e.server),i.a.defaults.baseURL=e.server}).catch(function(r){e.serverOk=!1,e.errorMessage="Server url is incorrect.",e.showError=!0})}},mounted:function(){this.$store.state.server?(this.server=this.$store.state.server,this.checkServer()):(this.server="".concat(window.location.origin,"/api"),this.checkServer()),!0===this.$store.state.isAuth&&this.$router.push("/")}},l=n,c=(t("0a16"),t("2877")),u=Object(c["a"])(l,s,a,!1,null,"6ae4e21a",null);u.options.__file="Login.vue";r["default"]=u.exports},e139:function(e,r,t){}}]);
//# sourceMappingURL=chunk-072a2a38.7bebaae7.js.map